import{a as A,r as l,a7 as E,c as h,b as o,w as c,e as F,o as B,f as i}from"./index.b7c05205.js";import{E as y}from"./el-button.b5150a85.js";const b=F("div",null,"\u4F7F\u7528\u63D0\u793A: \u83B7\u53D6\u97F3\u89C6\u9891\u540E\u5F00\u542F\u753B\u4E2D\u753B\u6A21\u5F0F\uFF0C\u53EF\u4EE5\u770B\u5230\u989D\u5916\u7684\u4E09\u4E2A\u6309\u94AE",-1),V=A({__name:"pip",setup(S){const d=l(),u=l(),n=l(!0),s=l(!0),k=async()=>{u.value=await navigator.mediaDevices.getUserMedia({video:{deviceId:"e9ae60563d15c7e9df5f8302b94665fac9830287a7792501783b8c01d332ab30"},audio:{deviceId:"ec92dd8d23935c459e1190aa8a4c8133f47b1d63a5c0bdd355eb302f313011d2"}}),d.value.srcObject=u.value,navigator.mediaSession.setCameraActive(n.value),navigator.mediaSession.setMicrophoneActive(s.value)},v=async()=>{var e;const t=(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0];(e=u.value)==null||e.addTrack(t)},m=async()=>{var t;const a=(t=u.value)==null?void 0:t.getVideoTracks();a!=null&&a.length&&a.forEach(e=>{var r;e.stop(),(r=u.value)==null||r.removeTrack(e)})},f=async()=>{var e;const t=(await navigator.mediaDevices.getUserMedia({audio:{deviceId:"ec92dd8d23935c459e1190aa8a4c8133f47b1d63a5c0bdd355eb302f313011d2"}})).getAudioTracks()[0];(e=u.value)==null||e.addTrack(t)},g=async()=>{var t;const a=(t=u.value)==null?void 0:t.getAudioTracks();a!=null&&a.length&&a.forEach(e=>{var r;e.stop(),(r=u.value)==null||r.removeTrack(e)})},p=async()=>{var t;const a=(t=u.value)==null?void 0:t.getTracks();a!=null&&a.length&&a.forEach(e=>{e.stop()})},_=async()=>{d.value!==document.pictureInPictureElement?await d.value.requestPictureInPicture():await document.exitPictureInPicture()};E(()=>{C(),console.log("\u6267\u884C")});const C=()=>{navigator.mediaSession.setActionHandler("hangup",()=>{_(),p()}),navigator.mediaSession.setActionHandler("togglecamera",()=>{n.value?(m(),n.value=!1):(v(),n.value=!0),navigator.mediaSession.setCameraActive(n.value)}),navigator.mediaSession.setActionHandler("togglemicrophone",()=>{s.value?(g(),s.value=!1):(f(),s.value=!0),navigator.mediaSession.setMicrophoneActive(s.value)})};return(a,t)=>{const e=y;return B(),h("div",null,[b,o(e,{onClick:k,type:"success"},{default:c(()=>[i("\u83B7\u53D6\u97F3\u89C6\u9891")]),_:1}),o(e,{onClick:p,type:"danger"},{default:c(()=>[i("\u505C\u6B62\u97F3\u89C6\u9891")]),_:1}),o(e,{onClick:_},{default:c(()=>[i("\u5207\u6362\u753B\u4E2D\u753B\u6A21\u5F0F")]),_:1}),o(e,{onClick:v},{default:c(()=>[i("\u5F00\u542F\u89C6\u9891\u8F68\u9053")]),_:1}),o(e,{onClick:m},{default:c(()=>[i("\u505C\u6B62\u89C6\u9891\u8F68\u9053")]),_:1}),o(e,{onClick:f},{default:c(()=>[i("\u5F00\u542F\u97F3\u9891\u8F68\u9053")]),_:1}),o(e,{onClick:g},{default:c(()=>[i("\u505C\u6B62\u97F3\u9891\u8F68\u9053")]),_:1}),F("video",{id:"camera",ref_key:"camera",ref:d,autoplay:""},null,512)])}}});export{V as default};
